<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>fitplugin - Bumps plugin definition for reflectivity models &#8212; Refl1D 0.7.7.post1533+gc6a0ac1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku-site.css?v=ccbba224" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <script src="../_static/documentation_options.js?v=132fb2fb"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="flayer - Functional layers" href="flayer.html" />
    <link rel="prev" title="experiment - Reflectivity fitness function" href="experiment.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>Refl1D 0.7.7.post1533+gc6a0ac1 documentation</span></a></h1>
        <h2 class="heading"><span>fitplugin - Bumps plugin definition for reflectivity models</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="experiment.html">experiment - Reflectivity fitness function</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="flayer.html">flayer - Functional layers</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="fitplugin-bumps-plugin-definition-for-reflectivity-models">
<h1>fitplugin - Bumps plugin definition for reflectivity models<a class="headerlink" href="#fitplugin-bumps-plugin-definition-for-reflectivity-models" title="Link to this heading">¶</a></h1>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../refl1d.fitplugin.html#refl1d.fitplugin.data_view" title="refl1d.fitplugin.data_view"><code class="xref py py-obj docutils literal notranslate"><span class="pre">data_view</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../refl1d.fitplugin.html#refl1d.fitplugin.model_view" title="refl1d.fitplugin.model_view"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model_view</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../refl1d.fitplugin.html#refl1d.fitplugin.new_model" title="refl1d.fitplugin.new_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">new_model</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../refl1d.fitplugin.html#refl1d.fitplugin.calc_errors" title="refl1d.fitplugin.calc_errors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc_errors</span></code></a></p></td>
<td><p>Align the sample profiles and compute the residual difference from the measured reflectivity for a set of points.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../refl1d.fitplugin.html#refl1d.fitplugin.show_errors" title="refl1d.fitplugin.show_errors"><code class="xref py py-obj docutils literal notranslate"><span class="pre">show_errors</span></code></a></p></td>
<td><p>Plot the aligned profiles and the distribution of the residuals for profiles and residuals returned from calc_errors.</p></td>
</tr>
</tbody>
</table>
<p id="module-refl1d.fitplugin">Reflectivity plugin for fitting GUI.</p>
<p>Note that the fitting infrastructure is still heavily tied to the reflectivity
modeling program, and this represents only the first tiny steps to separating
the two.</p>
<dl class="py function">
<dt class="sig sig-object py" id="refl1d.fitplugin.calc_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.fitplugin.</span></span><span class="sig-name descname"><span class="pre">calc_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">problem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/refl1d/errors.html#calc_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.fitplugin.calc_errors" title="Link to this definition">¶</a></dt>
<dd><p>Align the sample profiles and compute the residual difference from the
measured reflectivity for a set of points.</p>
<p>The points should be sampled from the posterior probability
distribution computed from MCMC, bootstrapping or sampled from
the error ellipse calculated at the minimum.</p>
<p>Each of the returned arguments is a dictionary mapping model number to
error sample data as follows:</p>
<p>Returns (profiles, slabs, Q, residuals).</p>
<p><em>profiles</em></p>
<blockquote>
<div><p>Arrays of (z, rho, irho) for non-magnetic models or arrays
of (z, rho, irho, rhoM, thetaM) for magnetic models.  There
will be one set of arrays returned per error sample.</p>
</div></blockquote>
<p><em>slabs</em></p>
<blockquote>
<div><p>Array of slab thickness for the layers in the models.  There
will be one array returned per error sample.  Using slab thickness,
profiles can be aligned on interface boundaries and layer centers.</p>
</div></blockquote>
<p><em>Q</em></p>
<blockquote>
<div><p>Array of Q values for the data points in the model.  The data
points are the same for all error samples, so only one Q array
is needed per model.</p>
</div></blockquote>
<p><em>residuals</em></p>
<blockquote>
<div><p>Array of (theory-data)/uncertainty for each data point in
the measurement.  There will be one array returned per error sample.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.fitplugin.data_view">
<span class="sig-prename descclassname"><span class="pre">refl1d.fitplugin.</span></span><span class="sig-name descname"><span class="pre">data_view</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/refl1d/fitplugin.html#data_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.fitplugin.data_view" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.fitplugin.model_view">
<span class="sig-prename descclassname"><span class="pre">refl1d.fitplugin.</span></span><span class="sig-name descname"><span class="pre">model_view</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/refl1d/fitplugin.html#model_view"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.fitplugin.model_view" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.fitplugin.new_model">
<span class="sig-prename descclassname"><span class="pre">refl1d.fitplugin.</span></span><span class="sig-name descname"><span class="pre">new_model</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/refl1d/fitplugin.html#new_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.fitplugin.new_model" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.fitplugin.show_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.fitplugin.</span></span><span class="sig-name descname"><span class="pre">show_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(68,</span> <span class="pre">95)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/refl1d/errors.html#show_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.fitplugin.show_errors" title="Link to this definition">¶</a></dt>
<dd><p>Plot the aligned profiles and the distribution of the residuals for
profiles and residuals returned from calc_errors.</p>
<p><em>contours</em> can be a list of percentiles or [].  If percentiles
are given, then show uncertainty using a contour plot with the
given levels, otherwise just overplot sample lines.
<em>contours</em> defaults to [68, 95, 100].</p>
<p><em>npoints</em> is the number of points to use when generating the
profile contour.  Since the z values for the various lines do not
correspond, the contour generator interpolates the entire profile
range with linear spacing using this number of points.</p>
<p><em>align</em> is the interface number plus fractional distance within
the layer following the interface.  For example, use 0 for the
substrate interface, use -1 for the surface interface, or use 2.5
for the center of the second slab above the substrate. If <em>align=’auto’</em>
then choose an offset that minimizes the cross-correlation between the
first profile and the current profile.</p>
<p><em>plots</em> is the number of plots to use (1, 2, or ‘n’).</p>
<p><em>save</em> is the basename of the plot to save.  This should usually
be “&lt;store&gt;/&lt;model&gt;”.  The program will add ‘-err#.png’ where ‘#’
is the number of the plot.</p>
</dd></dl>

</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="experiment.html">experiment - Reflectivity fitness function</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="flayer.html">flayer - Functional layers</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>