<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Soft material structures &#8212; Refl1D 0.7.7.post1533+gc6a0ac1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/haiku-site.css?v=ccbba224" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <script src="../../_static/documentation_options.js?v=132fb2fb"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Freeform structures" href="freeform.html" />
    <link rel="prev" title="Hard material structures" href="NiTi.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>Refl1D 0.7.7.post1533+gc6a0ac1 documentation</span></a></h1>
        <h2 class="heading"><span>Soft material structures</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        «&#160;&#160;<a href="NiTi.html">Hard material structures</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="freeform.html">Freeform structures</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="soft-material-structures">
<h1>Soft material structures<a class="headerlink" href="#soft-material-structures" title="Link to this heading">¶</a></h1>
<p>Inter-diffusion properties of multilayer systems are of great interest in both
hard and soft materials. Jomaa, et. al  have shown that reflectometry can be
used to elucidate the kinetics of a diffusion process in polyelectrolytes
multilayers. Although the purpose of this paper was not to fit the presented
system, it offers a good model for an experimentally relevant system for which
information from neutron reflectometry can be obtained. In this model system
we will show that we can create a model for this type of system and determine
the relevant parameters through our optimisation scheme. This particular
example uses deuterated reference layers to determine the kinetics of the
overall system.</p>
<p>Reference: Jomaa, H., Schlenoff, Macromolecules, 38 (2005), 8473-8480
<a class="reference external" href="http://dx.doi.org/10.1021/ma050072g">http://dx.doi.org/10.1021/ma050072g</a></p>
<p>We will model the system described in figure 2 of the reference as
<a class="reference download internal" download="" href="../../_downloads/b46ad2e34cb11d7714caefa721c8183b/PEMU.py"><code class="xref download docutils literal notranslate"><span class="pre">PEMU.py</span></code></a>.</p>
<p>(<a class="reference download internal" download="" href="../../_downloads/12078720d0b5e11c37bdf0f86050a74f/PEMU-1.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../../_downloads/141706877a169f400e3932e6b7d148bc/PEMU-1.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../../_downloads/c509e5f953fa94bae3c136a9b35e338a/PEMU-1.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../../_downloads/f17a443f915fec6104c04ddb10a52d45/PEMU-1.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../../_images/PEMU-1.png" class="plot-directive" src="../../_images/PEMU-1.png" />
</figure>
<p>Bring in all of the functions from refl1d.names so that we can use them
in the remainder of the script.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">refl1d.names</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
<p>The polymer system is deposited on a gold film with chromium as an
adhesion layer. Because these are standard films which are very well-known
in this experiment we can use the built-in materials library to create
these layers.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># == Sample definition ==</span>
<span class="n">chrome</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="s2">&quot;Cr&quot;</span><span class="p">)</span>
<span class="n">gold</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="s2">&quot;Au&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The polymer system consists of two polymers, deuterated and non-deuterated
PDADMA/PSS.  Since the neutron scattering cross section for deuterium is
considerably different from that for hydrogen while having nearly identical
chemical properties, we can use the deuterium as a tag to see to what
extent the deuterated polymer layer interdiffuses with an underated polymer
layer.</p>
<p>We model the materials using scattering length density (SLD) rather than using
the chemical formula and mass density.  This allows us to fit the SLD directly
rather than making assumptions about the specific chemical composition of the
mixture.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PDADMA_dPSS</span> <span class="o">=</span> <span class="n">SLD</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;PDADMA dPSS&quot;</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">2.77</span><span class="p">)</span>
<span class="n">PDADMA_PSS</span> <span class="o">=</span> <span class="n">SLD</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;PDADMA PSS&quot;</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="mf">1.15</span><span class="p">)</span>
</pre></div>
</div>
<p>The polymer materials are stacked into a bilayer, with thickness
estimates based on ellipsometery measurements (as stated in the paper).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">bilayer</span> <span class="o">=</span> <span class="n">PDADMA_PSS</span><span class="p">(</span><span class="mi">178</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">PDADMA_dPSS</span><span class="p">(</span><span class="mf">44.3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>The bilayer is repeated 5 times and stacked on the chromium/gold substrate
In this system we expect the kinetics of the surface diffusion to differ
from that of the bulk layer structure. Because we want the top bilayer to
optimise independently of the other bilayers, the fifth layer was not
included in the stack. If the diffusion properties of each layer were
expected to vary widely from one-another, the repeat notation could not
have been used at all.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">silicon</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="n">chrome</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">|</span> <span class="n">gold</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">bilayer</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">|</span> <span class="n">PDADMA_PSS</span><span class="p">(</span><span class="mi">178</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">PDADMA_dPSS</span><span class="p">(</span><span class="mf">44.3</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">|</span> <span class="n">air</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Now that the model sample is built, we can start adding ranges to the fit
parameters. We assume that the chromium and gold layers are well known through
other methods and will not fit it; however, additional optimisation could
certainly be included here.</p>
<p>As stated earlier, we will be fitting the SLD of the polymers directly.
The range for each will vary from that for pure deuterated to the
pure undeuterated SLD.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># == Fit parameters ==</span>
<span class="n">PDADMA_dPSS</span><span class="o">.</span><span class="n">rho</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mf">1.15</span><span class="p">,</span> <span class="mf">2.77</span><span class="p">)</span>
<span class="n">PDADMA_PSS</span><span class="o">.</span><span class="n">rho</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mf">1.15</span><span class="p">,</span> <span class="mf">2.77</span><span class="p">)</span>
</pre></div>
</div>
<p>We are primarily interested in the interfacial roughness so we will
fit those as well.  First we define the interfaces within the repeated
stack.  Note that the interface for bilayer[1] is the interface between
the current bilayer and the next bilayer.   Here we use sample[3] as
the repeated bilayer, which is the 0-origin index of the bilayer in the
stack.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
<p>The interface between the stack and the next layer is controlled from
the repeated bilayer.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
<p>Because the top bilayer has different dynamics, we optimize the interfaces
independenly. Although we want the optimiser to threat these parameters
independently because surface diffusion is expected to occur faster, the
overall nature of the diffusion is expected to be the same and so we use the
same limits.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
<span class="n">sample</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally we need to associate the sample with a measurement.  We do not
have the measurements from the paper available, so instead we will
simulate a measurement but setting up a neutron probe whose incident
angles range from 0 to 5 degrees in 100 steps.  The simulated measurement
is returned together with the model as a fit problem.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># == Data ==</span>
<span class="n">T</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">probe</span> <span class="o">=</span> <span class="n">NeutronProbe</span><span class="p">(</span><span class="n">T</span><span class="o">=</span><span class="n">T</span><span class="p">,</span> <span class="n">dT</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="mf">4.75</span><span class="p">,</span> <span class="n">dL</span><span class="o">=</span><span class="mf">0.0475</span><span class="p">)</span>

<span class="n">M</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">probe</span><span class="o">=</span><span class="n">probe</span><span class="p">,</span> <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">)</span>
<span class="n">M</span><span class="o">.</span><span class="n">simulate_data</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

<span class="n">problem</span> <span class="o">=</span> <span class="n">FitProblem</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        «&#160;&#160;<a href="NiTi.html">Hard material structures</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="freeform.html">Freeform structures</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>