<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>refl1d.probe module &#8212; Refl1D 0.7.7.post1533+gc6a0ac1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/haiku-site.css?v=ccbba224" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <script src="_static/documentation_options.js?v=132fb2fb"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Refl1D 0.7.7.post1533+gc6a0ac1 documentation</span></a></h1>
        <h2 class="heading"><span>refl1d.probe module</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="module-refl1d.probe">
<span id="refl1d-probe-module"></span><h1>refl1d.probe module<a class="headerlink" href="#module-refl1d.probe" title="Link to this heading">¶</a></h1>
<p>Experimental probe.</p>
<p>The experimental probe describes the incoming beam for the experiment.
Scattering properties of the sample are dependent on the type and
energy of the radiation.</p>
<p>See <a class="reference internal" href="guide/data.html#data-guide"><span class="std std-ref">Data Representation</span></a> for details.</p>
<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">BaseProbe</span></span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.Q">
<span class="sig-name descname"><span class="pre">Q</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.Q_c">
<span class="sig-name descname"><span class="pre">Q_c</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.Q_c"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.Q_c" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.R">
<span class="sig-name descname"><span class="pre">R</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.R" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.Ro">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Ro</span></span><a class="headerlink" href="#refl1d.probe.BaseProbe.Ro" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.apply_beam">
<span class="sig-name descname"><span class="pre">apply_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calc_Q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.apply_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.apply_beam" title="Link to this definition">¶</a></dt>
<dd><p>Apply factors such as beam intensity, background, backabsorption,
resolution to the data.</p>
<p><em>resolution</em> is True if the resolution function should be applied
to the reflectivity.</p>
<p><em>interpolation</em> is the number of Q points to show between the
nominal Q points of the probe. Use this to draw a smooth theory
line between the data points. The resolution dQ is interpolated
between the resolution of the surrounding Q points.</p>
<p>If an amplitude signal is provided, <span class="math notranslate nohighlight">\(r\)</span> will be scaled by
<span class="math notranslate nohighlight">\(\surd I + i \surd B / |r|\)</span>, which when squared will equal
<span class="math notranslate nohighlight">\(I |r|^2 + B\)</span>. The resolution function will be applied directly
to the amplitude. Unlike intensity and background, the resulting
<span class="math notranslate nohighlight">\(|G \ast r|^2 \ne G \ast |r|^2\)</span> for convolution operator <span class="math notranslate nohighlight">\(\ast\)</span>,
but it should be close.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.back_reflectivity">
<span class="sig-name descname"><span class="pre">back_reflectivity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.back_reflectivity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.BaseProbe.calc_Q" title="Link to this definition">¶</a></dt>
<dd><p>define in derived classes</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.dQ">
<span class="sig-name descname"><span class="pre">dQ</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NDArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.dQ" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.dR">
<span class="sig-name descname"><span class="pre">dR</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NDArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.dR" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.fresnel">
<span class="sig-name descname"><span class="pre">fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.fresnel" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Fresnel reflectivity calculator given the surface and
and substrate.  The calculated reflectivity includes The Fresnel
reflectivity for the probe reflecting from a block of material with
the given substrate.</p>
<p>Returns F = R(probe.Q), where R is magnitude squared reflectivity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.label">
<span class="sig-name descname"><span class="pre">label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gloss</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.label" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.log10_to_linear">
<span class="sig-name descname"><span class="pre">log10_to_linear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.log10_to_linear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.log10_to_linear" title="Link to this definition">¶</a></dt>
<dd><p>Convert data from log to linear.</p>
<p>Older reflectometry reduction code stored reflectivity in log base 10
format.  Call probe.log10_to_linear() after loading this data to
convert it to linear for subsequent display and fitting.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot" title="Link to this definition">¶</a></dt>
<dd><p>Plot theory against data.</p>
<p>Need substrate/surface for Fresnel-normalized reflectivity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_Q4">
<span class="sig-name descname"><span class="pre">plot_Q4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_Q4"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_Q4" title="Link to this definition">¶</a></dt>
<dd><p>Plot the Q**4 reflectivity associated with the probe.</p>
<p>Note that Q**4 reflectivity has the intensity and background applied
so that hydrogenated samples display more cleanly.  The formula
to reproduce the graph is:</p>
<div class="math notranslate nohighlight">
\[R' = R / ( (100*Q)^{-4} I + B)
\Delta R' = \Delta R / ( (100*Q)^{-4} I + B )\]</div>
<p>where <span class="math notranslate nohighlight">\(B\)</span> is the background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_fft">
<span class="sig-name descname"><span class="pre">plot_fft</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_fft"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_fft" title="Link to this definition">¶</a></dt>
<dd><p>FFT analysis of reflectivity signal.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_fresnel">
<span class="sig-name descname"><span class="pre">plot_fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_fresnel" title="Link to this definition">¶</a></dt>
<dd><p>Plot the Fresnel-normalized reflectivity associated with the probe.</p>
<p>Note that the Fresnel reflectivity has the intensity and background
applied before normalizing so that hydrogenated samples display more
cleanly.  The formula to reproduce the graph is:</p>
<div class="math notranslate nohighlight">
\[R' = R / (F(Q) I + B)
\Delta R' = \Delta R / (F(Q) I + B)\]</div>
<p>where <span class="math notranslate nohighlight">\(I\)</span> is the intensity and <span class="math notranslate nohighlight">\(B\)</span> is the background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_linear">
<span class="sig-name descname"><span class="pre">plot_linear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_linear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_linear" title="Link to this definition">¶</a></dt>
<dd><p>Plot the data associated with probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_log">
<span class="sig-name descname"><span class="pre">plot_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_log" title="Link to this definition">¶</a></dt>
<dd><p>Plot the data associated with probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_logfresnel">
<span class="sig-name descname"><span class="pre">plot_logfresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_logfresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_logfresnel" title="Link to this definition">¶</a></dt>
<dd><p>Plot the log Fresnel-normalized reflectivity associated with the probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_residuals">
<span class="sig-name descname"><span class="pre">plot_residuals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_residuals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_residuals" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_resolution">
<span class="sig-name descname"><span class="pre">plot_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.plot_resolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.plot_shift">
<span class="sig-name descname"><span class="pre">plot_shift</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.plot_shift" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.residuals_shift">
<span class="sig-name descname"><span class="pre">residuals_shift</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.residuals_shift" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.resolution">
<span class="sig-name descname"><span class="pre">resolution</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'uniform'</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.resolution_guard">
<span class="sig-name descname"><span class="pre">resolution_guard</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.resolution_guard"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.resolution_guard" title="Link to this definition">¶</a></dt>
<dd><p>Make sure each measured <span class="math notranslate nohighlight">\(Q\)</span> point has at least 5 calculated <span class="math notranslate nohighlight">\(Q\)</span>
points contributing to it in the range <span class="math notranslate nohighlight">\([-3\Delta Q, 3\Delta Q]\)</span>.</p>
<p><em>Not Implemented</em></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.restore_data">
<span class="sig-name descname"><span class="pre">restore_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.restore_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.restore_data" title="Link to this definition">¶</a></dt>
<dd><p>Restore the original data after resynth.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.resynth_data">
<span class="sig-name descname"><span class="pre">resynth_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.resynth_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.resynth_data" title="Link to this definition">¶</a></dt>
<dd><p>Generate new data according to the model R’ ~ N(R, dR).</p>
<p>The resynthesis step is a precursor to refitting the data, as is
required for certain types of monte carlo error analysis.  The
first time it is run it will save the original R into Ro.  If you
reset R in the probe you will also need to reset Ro so that it
is used for subsequent resynth analysis.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.save" title="Link to this definition">¶</a></dt>
<dd><p>Save the data and theory to a file.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.show_resolution">
<span class="sig-name descname"><span class="pre">show_resolution</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.show_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.simulate_data">
<span class="sig-name descname"><span class="pre">simulate_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#BaseProbe.simulate_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.BaseProbe.simulate_data" title="Link to this definition">¶</a></dt>
<dd><p>Set the data for the probe to R + eps with eps ~ normal(dR^2).</p>
<p><em>theory</em> is (Q, R),</p>
<p>If the percent <em>noise</em> is provided, set dR to R*noise/100 before
simulating.  <em>noise</em> defaults to 2% if no dR is present.</p>
<p>Note that measured data estimates uncertainty from the number of
counts.  This means that points above the true value will have
larger uncertainty than points below the true value.  This bias
is not captured in the simulated data.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.BaseProbe.view">
<span class="sig-name descname"><span class="pre">view</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log'</span></em><a class="headerlink" href="#refl1d.probe.BaseProbe.view" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">NeutronProbe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_reflectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dQo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'normal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#NeutronProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.NeutronProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.Probe" title="refl1d.probe.Probe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Probe</span></code></a></p>
<p>Neutron probe.</p>
<p>By providing a scattering factor calculator for X-ray scattering, model
components can be defined by mass density and chemical composition.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.L">
<span class="sig-name descname"><span class="pre">L</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.L" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.T">
<span class="sig-name descname"><span class="pre">T</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.T" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.radiation">
<span class="sig-name descname"><span class="pre">radiation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'neutron'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'xray'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'neutron'</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.radiation" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.sample_broadening">
<span class="sig-name descname"><span class="pre">sample_broadening</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.sample_broadening" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#NeutronProbe.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.NeutronProbe.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.NeutronProbe.theta_offset">
<span class="sig-name descname"><span class="pre">theta_offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.NeutronProbe.theta_offset" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">PolarizedNeutronProbe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Aguide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">270.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Polarized neutron probe</p>
<p><em>xs</em> (4 x NeutronProbe) is a sequence pp, pm, mp and mm.</p>
<p><em>Aguide</em> (degrees) is the angle of the applied field relative
to the plane of the sample, with angle 270º in the plane of the sample.</p>
<p><em>H</em> (tesla) is the magnitude of the applied field</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.Aguide">
<span class="sig-name descname"><span class="pre">Aguide</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.Aguide" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.H">
<span class="sig-name descname"><span class="pre">H</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.H" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.apply_beam">
<span class="sig-name descname"><span class="pre">apply_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.apply_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.apply_beam" title="Link to this definition">¶</a></dt>
<dd><p>Apply factors such as beam intensity, background, backabsorption,
and footprint to the data.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.calc_Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.fresnel">
<span class="sig-name descname"><span class="pre">fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.fresnel" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Fresnel reflectivity calculator given the surface and
and substrate.  The calculated reflectivity includes The Fresnel
reflectivity for the probe reflecting from a block of material with
the given substrate.</p>
<p>Returns F = R(probe.Q), where R is magnitude squared reflectivity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.mm">
<span class="sig-name descname"><span class="pre">mm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.mm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.mp">
<span class="sig-name descname"><span class="pre">mp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.mp" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.oversample" title="Link to this definition">¶</a></dt>
<dd><p>Generate an over-sampling of Q to avoid aliasing effects.</p>
<p>Oversampling is needed for thick layers, in which the underlying
reflectivity oscillates so rapidly in Q that a single measurement
has contributions from multiple Kissig fringes.</p>
<p>Sampling will be done using a pseudo-random generator so that
accidental structure in the function does not contribute to the
aliasing.  The generator will usually be initialized with a fixed
<em>seed</em> so that the point selection will not change from run to run,
but a <em>seed</em> of None will choose a different set of points each time
oversample is called.</p>
<p>The value <em>n</em> is the number of points that should contribute to
each Q value when computing the resolution.   These will be
distributed about the nominal measurement value, but varying in
both angle and energy according to the resolution function.  This
will yield more points near the measurement and fewer farther away.
The measurement point itself will not be used to avoid accidental
bias from uniform Q steps.  Depending on the problem, a value of
<em>n</em> between 20 and 100 should lead to stable values for the convolved
reflectivity.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.PolarizedNeutronProbe.oversample" title="refl1d.probe.PolarizedNeutronProbe.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a> will remove the extra Q calculation
points introduced by <code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.oversampling">
<span class="sig-name descname"><span class="pre">oversampling</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.oversampling" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.oversampling_seed">
<span class="sig-name descname"><span class="pre">oversampling_seed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.oversampling_seed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.parameters" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">view</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot" title="Link to this definition">¶</a></dt>
<dd><p>Plot theory against data.</p>
<p>Need substrate/surface for Fresnel-normalized reflectivity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_Q4">
<span class="sig-name descname"><span class="pre">plot_Q4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_Q4"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_Q4" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_SA">
<span class="sig-name descname"><span class="pre">plot_SA</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_SA"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_SA" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_fresnel">
<span class="sig-name descname"><span class="pre">plot_fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_fresnel" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_linear">
<span class="sig-name descname"><span class="pre">plot_linear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_linear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_linear" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_log">
<span class="sig-name descname"><span class="pre">plot_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_log" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_logfresnel">
<span class="sig-name descname"><span class="pre">plot_logfresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_logfresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_logfresnel" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_residuals">
<span class="sig-name descname"><span class="pre">plot_residuals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_residuals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_residuals" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.plot_resolution">
<span class="sig-name descname"><span class="pre">plot_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.plot_resolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.plot_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.pm">
<span class="sig-name descname"><span class="pre">pm</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.pm" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.polarized">
<span class="sig-name descname"><span class="pre">polarized</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.polarized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.pp">
<span class="sig-name descname"><span class="pre">pp</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.pp" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.restore_data">
<span class="sig-name descname"><span class="pre">restore_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.restore_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.restore_data" title="Link to this definition">¶</a></dt>
<dd><p>Restore the original data after resynth.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.resynth_data">
<span class="sig-name descname"><span class="pre">resynth_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.resynth_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.resynth_data" title="Link to this definition">¶</a></dt>
<dd><p>Generate new data according to the model R’ ~ N(R, dR).</p>
<p>The resynthesis step is a precursor to refitting the data, as is
required for certain types of monte carlo error analysis.  The
first time it is run it will save the original R into Ro.  If you
reset R in the probe you will also need to reset Ro so that it
is used for subsequent resynth analysis.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.save" title="Link to this definition">¶</a></dt>
<dd><p>Save the data and theory to a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.select_corresponding">
<span class="sig-name descname"><span class="pre">select_corresponding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.select_corresponding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.select_corresponding" title="Link to this definition">¶</a></dt>
<dd><p>Select theory points corresponding to the measured data.</p>
<p>Since we have evaluated theory at every Q, it is safe to interpolate
measured Q into theory, since it will land on a node,
not in an interval.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.shared_beam">
<span class="sig-name descname"><span class="pre">shared_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.shared_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.shared_beam" title="Link to this definition">¶</a></dt>
<dd><p>Share beam parameters across all four cross sections.</p>
<p>New parameters are created for <em>intensity</em>, <em>background</em>,
<em>theta_offset</em>, <em>sample_broadening</em> and <em>back_absorption</em>
and assigned to the all cross sections.  These can be replaced
with an explicit parameter in an individual cross section if that
parameter is independent.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.show_resolution">
<span class="sig-name descname"><span class="pre">show_resolution</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.show_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.simulate_data">
<span class="sig-name descname"><span class="pre">simulate_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedNeutronProbe.simulate_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.simulate_data" title="Link to this definition">¶</a></dt>
<dd><p>Set the data for the probe to R + eps with eps ~ normal(dR^2).</p>
<p><em>theory</em> is (Q, R),</p>
<p>If the percent <em>noise</em> is provided, set dR to R*noise/100 before
simulating.  <em>noise</em> defaults to 2% if no dR is present.</p>
<p>Note that measured data estimates uncertainty from the number of
counts.  This means that points above the true value will have
larger uncertainty than points below the true value.  This bias
is not captured in the simulated data.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.substrate">
<span class="sig-name descname"><span class="pre">substrate</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.substrate" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.surface">
<span class="sig-name descname"><span class="pre">surface</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.surface" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.view">
<span class="sig-name descname"><span class="pre">view</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.view" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronProbe.xs">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">xs</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#refl1d.probe.PolarizedNeutronProbe.xs" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedNeutronQProbe">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">PolarizedNeutronQProbe</span></span><a class="headerlink" href="#refl1d.probe.PolarizedNeutronQProbe" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#refl1d.probe.PolarizedQProbe" title="refl1d.probe.PolarizedQProbe"><code class="xref py py-class docutils literal notranslate"><span class="pre">PolarizedQProbe</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">PolarizedQProbe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">refl1d.probe.NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">refl1d.probe.NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">refl1d.probe.NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#refl1d.probe.NeutronProbe" title="refl1d.probe.NeutronProbe"><span class="pre">refl1d.probe.NeutronProbe</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Aguide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">270.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#PolarizedQProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.PolarizedQProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.PolarizedNeutronProbe" title="refl1d.probe.PolarizedNeutronProbe"><code class="xref py py-class docutils literal notranslate"><span class="pre">PolarizedNeutronProbe</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe.Aguide">
<span class="sig-name descname"><span class="pre">Aguide</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.PolarizedQProbe.Aguide" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe.H">
<span class="sig-name descname"><span class="pre">H</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.PolarizedQProbe.H" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.PolarizedQProbe.calc_Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#refl1d.probe.PolarizedQProbe.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.PolarizedQProbe.polarized">
<span class="sig-name descname"><span class="pre">polarized</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#refl1d.probe.PolarizedQProbe.polarized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.Probe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">Probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_reflectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dQo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'normal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.BaseProbe" title="refl1d.probe.BaseProbe"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseProbe</span></code></a></p>
<p>Defines the incident beam used to study the material.</p>
<p>For calculation purposes, probe needs to return the values <span class="math notranslate nohighlight">\(Q_\text{calc}\)</span>
at which the model is evaluated.  This is normally going to be the measured
points only, but for some systems, such as those with very thick layers,
oversampling is needed to avoid aliasing effects.</p>
<p>A measurement point consists of incident angle, angular resolution,
incident wavelength, FWHM wavelength resolution, reflectivity and
uncertainty in reflectivity.</p>
<p>A probe is a set of points, defined by vectors for point attribute.  For
convenience, the attribute can be initialized with a scalar if it is
constant throughout the measurement, but will be set to a vector in
the probe.  The attributes are initialized as follows:</p>
<blockquote>
<div><dl>
<dt><em>T</em><span class="classifier">float or [float] | degrees</span></dt><dd><p>Incident angle</p>
</dd>
<dt><em>dT</em><span class="classifier">float or [float] | degrees</span></dt><dd><p>FWHM angular divergence</p>
</dd>
<dt><em>L</em><span class="classifier">float or [float] | Å</span></dt><dd><p>Incident wavelength</p>
</dd>
<dt><em>dL</em><span class="classifier">float or [float] | Å</span></dt><dd><p>FWHM wavelength dispersion</p>
</dd>
<dt><em>data</em><span class="classifier">([float], [float])</span></dt><dd><p>R, dR reflectivity measurement and uncertainty</p>
</dd>
<dt><em>dQ</em><span class="classifier">[float] or None | Å<sup>-1</sup></span></dt><dd><p>1-$sigma$ Q resolution when it cannot be computed directly
from angular divergence and wavelength dispersion.</p>
</dd>
<dt><em>resolution</em><span class="classifier">‘normal’ or ‘uniform’</span></dt><dd><p>Distribution function for Q resolution.</p>
</dd>
</dl>
</div></blockquote>
<p>Measurement properties:</p>
<blockquote>
<div><dl class="simple">
<dt><em>intensity</em><span class="classifier">float or Parameter</span></dt><dd><p>Beam intensity</p>
</dd>
<dt><em>background</em><span class="classifier">float or Parameter</span></dt><dd><p>Constant background</p>
</dd>
<dt><em>back_absorption</em><span class="classifier">float or Parameter</span></dt><dd><p>Absorption through the substrate relative to beam intensity.
A value of 1.0 means complete transmission; a value of 0.0
means complete absorption.</p>
</dd>
<dt><em>theta_offset</em><span class="classifier">float or Parameter</span></dt><dd><p>Offset of the sample from perfect alignment</p>
</dd>
<dt><em>sample_broadening</em><span class="classifier">float or Parameter</span></dt><dd><p>Additional FWHM angular divergence from sample curvature.
Scale 1-<span class="math notranslate nohighlight">\(\sigma\)</span> rms by <span class="math notranslate nohighlight">\(2 \surd(2 \ln 2) \approx 2.35\)</span> to convert
to FWHM.</p>
</dd>
<dt><em>back_reflectivity</em><span class="classifier">True or False</span></dt><dd><p>True if the beam enters through the substrate</p>
</dd>
</dl>
</div></blockquote>
<p>Measurement properties are fittable parameters.  <em>theta_offset</em> in
particular should be set using <em>probe.theta_offset.dev(dT)</em>, with <em>dT</em>
equal to the FWHM uncertainty in the peak position for the rocking curve,
as measured in radians. Changes to <em>theta_offset</em> will then be penalized
in the cost function for the fit as if it were another measurement.  Use
<a class="reference internal" href="#refl1d.probe.Probe.alignment_uncertainty" title="refl1d.probe.Probe.alignment_uncertainty"><code class="xref py py-meth docutils literal notranslate"><span class="pre">alignment_uncertainty()</span></code></a> to compute dT from the shape of the
rocking curve.</p>
<p>Sample broadening adjusts the existing Q resolution rather than
recalculating it. This allows it the resolution to describe more
complicated effects than a simple gaussian distribution of wavelength
and angle will allow. The calculation uses the mean wavelength, angle
and angular divergence. See <code class="xref py py-func docutils literal notranslate"><span class="pre">resolution.dQ_broadening()</span></code> for details.</p>
<p><em>intensity</em> and <em>back_absorption</em> are generally not needed — scaling
the reflected signal by an appropriate intensity measurement will correct
for both of these during reduction.  <em>background</em> may be needed,
particularly for samples with significant hydrogen content due to its
large isotropic incoherent scattering cross section.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.Aguide">
<span class="sig-name descname"><span class="pre">Aguide</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">270.0</span></em><a class="headerlink" href="#refl1d.probe.Probe.Aguide" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.L">
<span class="sig-name descname"><span class="pre">L</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.Probe.L" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.Probe.Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Q</span></span><a class="headerlink" href="#refl1d.probe.Probe.Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.R">
<span class="sig-name descname"><span class="pre">R</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.Probe.R" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.T">
<span class="sig-name descname"><span class="pre">T</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.Probe.T" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.alignment_uncertainty">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">alignment_uncertainty</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">I</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.alignment_uncertainty"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.alignment_uncertainty" title="Link to this definition">¶</a></dt>
<dd><p>Compute alignment uncertainty.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt><em>w</em><span class="classifier">float | degrees</span></dt><dd><p>Rocking curve full width at half max.</p>
</dd>
<dt><em>I</em><span class="classifier">float | counts</span></dt><dd><p>Rocking curve integrated intensity.</p>
</dd>
<dt><em>d</em> = 0: float | degrees</dt><dd><p>Motor step size</p>
</dd>
</dl>
<p><strong>Returns:</strong></p>
<dl class="simple">
<dt><em>dtheta</em><span class="classifier">float | degrees</span></dt><dd><p>uncertainty in alignment angle</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.Probe.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.back_reflectivity">
<span class="sig-name descname"><span class="pre">back_reflectivity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#refl1d.probe.Probe.back_reflectivity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.Probe.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.Probe.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.Probe.calc_Q" title="Link to this definition">¶</a></dt>
<dd><p>define in derived classes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.critical_edge">
<span class="sig-name descname"><span class="pre">critical_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">51</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.critical_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.critical_edge" title="Link to this definition">¶</a></dt>
<dd><p>Oversample points near the critical edge.</p>
<p>The critical edge is defined by the difference in scattering
potential for the <em>substrate</em> and <em>surface</em> materials, or the
reverse if <em>back_reflectivity</em> is true.</p>
<p><em>n</em> is the number of <span class="math notranslate nohighlight">\(Q\)</span> points to compute near the critical edge.</p>
<p><em>delta</em> is the relative uncertainty in the material density,
which defines the range of values which are calculated.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.Probe.critical_edge" title="refl1d.probe.Probe.critical_edge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code></a> will remove the extra Q calculation
points introduced by <a class="reference internal" href="#refl1d.probe.Probe.oversample" title="refl1d.probe.Probe.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a>.</p>
<p>The <span class="math notranslate nohighlight">\(n\)</span> points <span class="math notranslate nohighlight">\(Q_i\)</span> are evenly distributed around the critical
edge in <span class="math notranslate nohighlight">\(Q_c \pm \delta Q_c\)</span> by varying angle <span class="math notranslate nohighlight">\(\theta\)</span> for a
fixed wavelength <span class="math notranslate nohighlight">\(&lt; \lambda &gt;\)</span>, the average of all wavelengths
in the probe.</p>
<p>Specifically:</p>
<div class="math notranslate nohighlight">
\[\begin{split}Q_c^2 &amp;= 16 \pi (\rho - \rho_\text{incident}) \\
Q_i &amp;= Q_c - \delta_i Q_c (i - (n-1)/2)
    \qquad \text{for} \; i \in 0 \ldots n-1 \\
\lambda_i &amp;= &lt; \lambda &gt; \\
\theta_i &amp;= \sin^{-1}(Q_i \lambda_i / 4 \pi)\end{split}\]</div>
<p>If <span class="math notranslate nohighlight">\(Q_c\)</span> is imaginary, then <span class="math notranslate nohighlight">\(-|Q_c|\)</span> is used instead, so this
routine can be used for reflectivity signals which scan from
back reflectivity to front reflectivity.  For completeness,
the angle <span class="math notranslate nohighlight">\(\theta = 0\)</span> is added as well.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.dL">
<span class="sig-name descname"><span class="pre">dL</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.Probe.dL" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.Probe.dQ">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dQ</span></span><a class="headerlink" href="#refl1d.probe.Probe.dQ" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.dQo">
<span class="sig-name descname"><span class="pre">dQo</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Sequence</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">NDArray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.Probe.dQo" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.dR">
<span class="sig-name descname"><span class="pre">dR</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.Probe.dR" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.dT">
<span class="sig-name descname"><span class="pre">dT</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.Probe.dT" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.Probe.filename" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.from_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.Probe.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.Probe.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.oversample" title="Link to this definition">¶</a></dt>
<dd><p>Generate an over-sampling of Q to avoid aliasing effects.</p>
<p>Oversampling is needed for thick layers, in which the underlying
reflectivity oscillates so rapidly in Q that a single measurement
has contributions from multiple Kissig fringes.</p>
<p>Sampling will be done using a pseudo-random generator so that
accidental structure in the function does not contribute to the
aliasing.  The generator will usually be initialized with a fixed
<em>seed</em> so that the point selection will not change from run to run,
but a <em>seed</em> of None will choose a different set of points each time
oversample is called.</p>
<p>The value <em>n</em> is the number of points that should contribute to
each Q value when computing the resolution.   These will be
distributed about the nominal measurement value, but varying in
both angle and energy according to the resolution function.  This
will yield more points near the measurement and fewer farther away.
The measurement point itself will not be used to avoid accidental
bias from uniform Q steps.  Depending on the problem, a value of
<em>n</em> between 20 and 100 should lead to stable values for the convolved
reflectivity.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.Probe.oversample" title="refl1d.probe.Probe.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a> will remove the extra Q calculation
points introduced by <a class="reference internal" href="#refl1d.probe.Probe.critical_edge" title="refl1d.probe.Probe.critical_edge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.oversampling">
<span class="sig-name descname"><span class="pre">oversampling</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.Probe.oversampling" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.oversampling_seed">
<span class="sig-name descname"><span class="pre">oversampling_seed</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#refl1d.probe.Probe.oversampling_seed" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.parameters" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.plot_shift">
<span class="sig-name descname"><span class="pre">plot_shift</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.Probe.plot_shift" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.polarized">
<span class="sig-name descname"><span class="pre">polarized</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#refl1d.probe.Probe.polarized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.radiation">
<span class="sig-name descname"><span class="pre">radiation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'neutron'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'xray'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'xray'</span></em><a class="headerlink" href="#refl1d.probe.Probe.radiation" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.residuals_shift">
<span class="sig-name descname"><span class="pre">residuals_shift</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#refl1d.probe.Probe.residuals_shift" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.resolution">
<span class="sig-name descname"><span class="pre">resolution</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'uniform'</span></em><a class="headerlink" href="#refl1d.probe.Probe.resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.sample_broadening">
<span class="sig-name descname"><span class="pre">sample_broadening</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.Probe.sample_broadening" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.show_resolution">
<span class="sig-name descname"><span class="pre">show_resolution</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#refl1d.probe.Probe.show_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.subsample">
<span class="sig-name descname"><span class="pre">subsample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dQ</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.subsample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.subsample" title="Link to this definition">¶</a></dt>
<dd><p>Select points at most every dQ.</p>
<p>Use this to speed up computation early in the fitting process.</p>
<p>This changes the data object, and is not reversible.</p>
<p>The current algorithm is not picking the “best” Q value, just the
nearest, so if you have nearby Q points with different quality
statistics (as happens in overlapped regions from spallation
source measurements at different angles), then it may choose
badly.  Simple solutions based on the smallest relative error dR/R
will be biased toward peaks, and smallest absolute error dR will
be biased toward valleys.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.theta_offset">
<span class="sig-name descname"><span class="pre">theta_offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.Probe.theta_offset" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the parameters</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.Probe.view">
<span class="sig-name descname"><span class="pre">view</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'log'</span></em><a class="headerlink" href="#refl1d.probe.Probe.view" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.Probe.write_data">
<span class="sig-name descname"><span class="pre">write_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">('Q',</span> <span class="pre">'R',</span> <span class="pre">'dR')</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">header</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Probe.write_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Probe.write_data" title="Link to this definition">¶</a></dt>
<dd><p>Save the data to a file.</p>
<p><em>header</em> is a string with trailing n containing the file header.
<em>columns</em> is a list of column names from Q, dQ, R, dR, L, dL, T, dT.</p>
<p>The default is to write Q, R, dR data.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">ProbeSet</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">probes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.Probe" title="refl1d.probe.Probe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Probe</span></code></a></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.L">
<span class="sig-name descname"><span class="pre">L</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.L" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Q</span></span><a class="headerlink" href="#refl1d.probe.ProbeSet.Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.T">
<span class="sig-name descname"><span class="pre">T</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.T" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.apply_beam">
<span class="sig-name descname"><span class="pre">apply_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calc_Q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.apply_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.apply_beam" title="Link to this definition">¶</a></dt>
<dd><p>Apply factors such as beam intensity, background, backabsorption,
resolution to the data.</p>
<p><em>resolution</em> is True if the resolution function should be applied
to the reflectivity.</p>
<p><em>interpolation</em> is the number of Q points to show between the
nominal Q points of the probe. Use this to draw a smooth theory
line between the data points. The resolution dQ is interpolated
between the resolution of the surrounding Q points.</p>
<p>If an amplitude signal is provided, <span class="math notranslate nohighlight">\(r\)</span> will be scaled by
<span class="math notranslate nohighlight">\(\surd I + i \surd B / |r|\)</span>, which when squared will equal
<span class="math notranslate nohighlight">\(I |r|^2 + B\)</span>. The resolution function will be applied directly
to the amplitude. Unlike intensity and background, the resulting
<span class="math notranslate nohighlight">\(|G \ast r|^2 \ne G \ast |r|^2\)</span> for convolution operator <span class="math notranslate nohighlight">\(\ast\)</span>,
but it should be close.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.ProbeSet.calc_Q" title="Link to this definition">¶</a></dt>
<dd><p>define in derived classes</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.dQ">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dQ</span></span><a class="headerlink" href="#refl1d.probe.ProbeSet.dQ" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.fresnel">
<span class="sig-name descname"><span class="pre">fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.fresnel" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Fresnel reflectivity calculator given the surface and
and substrate.  The calculated reflectivity includes The Fresnel
reflectivity for the probe reflecting from a block of material with
the given substrate.</p>
<p>Returns F = R(probe.Q), where R is magnitude squared reflectivity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.oversample" title="Link to this definition">¶</a></dt>
<dd><p>Generate an over-sampling of Q to avoid aliasing effects.</p>
<p>Oversampling is needed for thick layers, in which the underlying
reflectivity oscillates so rapidly in Q that a single measurement
has contributions from multiple Kissig fringes.</p>
<p>Sampling will be done using a pseudo-random generator so that
accidental structure in the function does not contribute to the
aliasing.  The generator will usually be initialized with a fixed
<em>seed</em> so that the point selection will not change from run to run,
but a <em>seed</em> of None will choose a different set of points each time
oversample is called.</p>
<p>The value <em>n</em> is the number of points that should contribute to
each Q value when computing the resolution.   These will be
distributed about the nominal measurement value, but varying in
both angle and energy according to the resolution function.  This
will yield more points near the measurement and fewer farther away.
The measurement point itself will not be used to avoid accidental
bias from uniform Q steps.  Depending on the problem, a value of
<em>n</em> between 20 and 100 should lead to stable values for the convolved
reflectivity.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.ProbeSet.oversample" title="refl1d.probe.ProbeSet.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a> will remove the extra Q calculation
points introduced by <a class="reference internal" href="api/probe.html#refl1d.probe.ProbeSet.critical_edge" title="refl1d.probe.ProbeSet.critical_edge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.parameters" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.parts">
<span class="sig-name descname"><span class="pre">parts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.parts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.parts" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot" title="Link to this definition">¶</a></dt>
<dd><p>Plot theory against data.</p>
<p>Need substrate/surface for Fresnel-normalized reflectivity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_Q4">
<span class="sig-name descname"><span class="pre">plot_Q4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_Q4"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_Q4" title="Link to this definition">¶</a></dt>
<dd><p>Plot the Q**4 reflectivity associated with the probe.</p>
<p>Note that Q**4 reflectivity has the intensity and background applied
so that hydrogenated samples display more cleanly.  The formula
to reproduce the graph is:</p>
<div class="math notranslate nohighlight">
\[R' = R / ( (100*Q)^{-4} I + B)
\Delta R' = \Delta R / ( (100*Q)^{-4} I + B )\]</div>
<p>where <span class="math notranslate nohighlight">\(B\)</span> is the background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_fresnel">
<span class="sig-name descname"><span class="pre">plot_fresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_fresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_fresnel" title="Link to this definition">¶</a></dt>
<dd><p>Plot the Fresnel-normalized reflectivity associated with the probe.</p>
<p>Note that the Fresnel reflectivity has the intensity and background
applied before normalizing so that hydrogenated samples display more
cleanly.  The formula to reproduce the graph is:</p>
<div class="math notranslate nohighlight">
\[R' = R / (F(Q) I + B)
\Delta R' = \Delta R / (F(Q) I + B)\]</div>
<p>where <span class="math notranslate nohighlight">\(I\)</span> is the intensity and <span class="math notranslate nohighlight">\(B\)</span> is the background.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_linear">
<span class="sig-name descname"><span class="pre">plot_linear</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_linear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_linear" title="Link to this definition">¶</a></dt>
<dd><p>Plot the data associated with probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_log">
<span class="sig-name descname"><span class="pre">plot_log</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_log"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_log" title="Link to this definition">¶</a></dt>
<dd><p>Plot the data associated with probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_logfresnel">
<span class="sig-name descname"><span class="pre">plot_logfresnel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_logfresnel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_logfresnel" title="Link to this definition">¶</a></dt>
<dd><p>Plot the log Fresnel-normalized reflectivity associated with the probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_residuals">
<span class="sig-name descname"><span class="pre">plot_residuals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_residuals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_residuals" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.plot_resolution">
<span class="sig-name descname"><span class="pre">plot_resolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.plot_resolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.plot_resolution" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.restore_data">
<span class="sig-name descname"><span class="pre">restore_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.restore_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.restore_data" title="Link to this definition">¶</a></dt>
<dd><p>Restore the original data after resynth.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.resynth_data">
<span class="sig-name descname"><span class="pre">resynth_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.resynth_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.resynth_data" title="Link to this definition">¶</a></dt>
<dd><p>Generate new data according to the model R’ ~ N(R, dR).</p>
<p>The resynthesis step is a precursor to refitting the data, as is
required for certain types of monte carlo error analysis.  The
first time it is run it will save the original R into Ro.  If you
reset R in the probe you will also need to reset Ro so that it
is used for subsequent resynth analysis.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.sample_broadening">
<span class="sig-name descname"><span class="pre">sample_broadening</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.sample_broadening" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.save" title="Link to this definition">¶</a></dt>
<dd><p>Save the data and theory to a file.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.shared_beam">
<span class="sig-name descname"><span class="pre">shared_beam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.shared_beam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.shared_beam" title="Link to this definition">¶</a></dt>
<dd><p>Share beam parameters across all segments.</p>
<p>New parameters are created for <em>intensity</em>, <em>background</em>,
<em>theta_offset</em>, <em>sample_broadening</em> and <em>back_absorption</em>
and assigned to the all segments.  These can be replaced
with an explicit parameter in an individual segment if that
parameter is independent.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.simulate_data">
<span class="sig-name descname"><span class="pre">simulate_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theory</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.simulate_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.simulate_data" title="Link to this definition">¶</a></dt>
<dd><p>Set the data for the probe to R + eps with eps ~ normal(dR^2).</p>
<p><em>theory</em> is (Q, R),</p>
<p>If the percent <em>noise</em> is provided, set dR to R*noise/100 before
simulating.  <em>noise</em> defaults to 2% if no dR is present.</p>
<p>Note that measured data estimates uncertainty from the number of
counts.  This means that points above the true value will have
larger uncertainty than points below the true value.  This bias
is not captured in the simulated data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.stitch">
<span class="sig-name descname"><span class="pre">stitch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">same_Q</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">same_dQ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.stitch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.stitch" title="Link to this definition">¶</a></dt>
<dd><p>Stitch together multiple datasets into a single dataset.</p>
<p>Points within <em>tol</em> of each other and with the same resolution
are combined by interpolating them to a common <span class="math notranslate nohighlight">\(Q\)</span> value then averaged
using Gaussian error propagation.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>probe | Probe
Combined data set.</p>
</dd>
<dt class="field-even">Algorithm<span class="colon">:</span></dt>
<dd class="field-even"><p></p></dd>
</dl>
<p>To interpolate a set of points to a common value, first find the
common <span class="math notranslate nohighlight">\(Q\)</span> value:</p>
<div class="math notranslate nohighlight">
\[\hat Q = \sum{Q_k} / n\]</div>
<p>Then for each dataset <span class="math notranslate nohighlight">\(k\)</span>, find the interval <span class="math notranslate nohighlight">\([i, i+1]\)</span> containing the
value <span class="math notranslate nohighlight">\(Q\)</span>, and use it to compute interpolated value for <span class="math notranslate nohighlight">\(R\)</span>:</p>
<div class="math notranslate nohighlight">
\[\begin{split}w &amp;= (\hat Q - Q_i)/(Q_{i+1} - Q_i) \\
\hat R &amp;= w R_{i+1} + (1-w) R_{i+1} \\
\hat \sigma_{R} &amp;=
    \sqrt{ w^2 \sigma^2_{R_i} + (1-w)^2 \sigma^2_{R_{i+1}} } / n\end{split}\]</div>
<p>Average the resulting <span class="math notranslate nohighlight">\(R\)</span> using Gaussian error propagation:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\hat R &amp;= \sum{\hat R_k}/n \\
\hat \sigma_R &amp;= \sqrt{\sum \hat \sigma_{R_k}^2}/n\end{split}\]</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.theta_offset">
<span class="sig-name descname"><span class="pre">theta_offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.ProbeSet.theta_offset" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.to_dict">
<span class="sig-name descname"><span class="pre">to_dict</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#ProbeSet.to_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.ProbeSet.to_dict" title="Link to this definition">¶</a></dt>
<dd><p>Return a dictionary representation of the parameters</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.ProbeSet.unique_L">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unique_L</span></span><a class="headerlink" href="#refl1d.probe.ProbeSet.unique_L" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.QProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">QProbe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dQ</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_reflectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'normal'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.BaseProbe" title="refl1d.probe.BaseProbe"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseProbe</span></code></a></p>
<p>A pure Q, R probe</p>
<p>This probe with no possibility of tricks such as looking up the
scattering length density based on wavelength, or adjusting for
alignment errors.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.Q">
<span class="sig-name descname"><span class="pre">Q</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.QProbe.Q" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.R">
<span class="sig-name descname"><span class="pre">R</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.QProbe.R" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.QProbe.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.QProbe.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.calc_Q">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc_Q</span></span><a class="headerlink" href="#refl1d.probe.QProbe.calc_Q" title="Link to this definition">¶</a></dt>
<dd><p>define in derived classes</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.critical_edge">
<span class="sig-name descname"><span class="pre">critical_edge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">substrate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">surface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">51</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.25</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe.critical_edge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe.critical_edge" title="Link to this definition">¶</a></dt>
<dd><p>Oversample points near the critical edge.</p>
<p>The critical edge is defined by the difference in scattering
potential for the <em>substrate</em> and <em>surface</em> materials, or the
reverse if <em>back_reflectivity</em> is true.</p>
<p><em>n</em> is the number of <span class="math notranslate nohighlight">\(Q\)</span> points to compute near the critical edge.</p>
<p><em>delta</em> is the relative uncertainty in the material density,
which defines the range of values which are calculated.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.QProbe.critical_edge" title="refl1d.probe.QProbe.critical_edge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code></a> will remove the extra Q calculation
points introduced by <a class="reference internal" href="#refl1d.probe.QProbe.oversample" title="refl1d.probe.QProbe.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a>.</p>
<p>The <span class="math notranslate nohighlight">\(n\)</span> points <span class="math notranslate nohighlight">\(Q_i\)</span> are evenly distributed around the critical
edge in <span class="math notranslate nohighlight">\(Q_c \pm \delta Q_c\)</span> by varying angle <span class="math notranslate nohighlight">\(\theta\)</span> for a
fixed wavelength <span class="math notranslate nohighlight">\(&lt; \lambda &gt;\)</span>, the average of all wavelengths
in the probe.</p>
<p>Specifically:</p>
<div class="math notranslate nohighlight">
\[\begin{split}Q_c^2 &amp;= 16 \pi (\rho - \rho_\text{incident}) \\
Q_i &amp;= Q_c - \delta_i Q_c (i - (n-1)/2)
    \qquad \text{for} \; i \in 0 \ldots n-1 \\
\lambda_i &amp;= &lt; \lambda &gt; \\
\theta_i &amp;= \sin^{-1}(Q_i \lambda_i / 4 \pi)\end{split}\]</div>
<p>If <span class="math notranslate nohighlight">\(Q_c\)</span> is imaginary, then <span class="math notranslate nohighlight">\(-|Q_c|\)</span> is used instead, so this
routine can be used for reflectivity signals which scan from
back reflectivity to front reflectivity.  For completeness,
the angle <span class="math notranslate nohighlight">\(\theta = 0\)</span> is added as well.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.filename">
<span class="sig-name descname"><span class="pre">filename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#refl1d.probe.QProbe.filename" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.from_dict">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe.from_dict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe.from_dict" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.QProbe.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.oversample">
<span class="sig-name descname"><span class="pre">oversample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe.oversample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe.oversample" title="Link to this definition">¶</a></dt>
<dd><p>Generate an over-sampling of Q to avoid aliasing effects.</p>
<p>Oversampling is needed for thick layers, in which the underlying
reflectivity oscillates so rapidly in Q that a single measurement
has contributions from multiple Kissig fringes.</p>
<p>Sampling will be done using a pseudo-random generator so that
accidental structure in the function does not contribute to the
aliasing.  The generator will usually be initialized with a fixed
<em>seed</em> so that the point selection will not change from run to run,
but a <em>seed</em> of None will choose a different set of points each time
oversample is called.</p>
<p>The value <em>n</em> is the number of points that should contribute to
each Q value when computing the resolution.   These will be
distributed about the nominal measurement value, but varying in
both angle and energy according to the resolution function.  This
will yield more points near the measurement and fewer farther away.
The measurement point itself will not be used to avoid accidental
bias from uniform Q steps.  Depending on the problem, a value of
<em>n</em> between 20 and 100 should lead to stable values for the convolved
reflectivity.</p>
<p>Note: <a class="reference internal" href="#refl1d.probe.QProbe.oversample" title="refl1d.probe.QProbe.oversample"><code class="xref py py-meth docutils literal notranslate"><span class="pre">oversample()</span></code></a> will remove the extra Q calculation
points introduced by <a class="reference internal" href="#refl1d.probe.QProbe.critical_edge" title="refl1d.probe.QProbe.critical_edge"><code class="xref py py-meth docutils literal notranslate"><span class="pre">critical_edge()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.parameters">
<span class="sig-name descname"><span class="pre">parameters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe.parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe.parameters" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.polarized">
<span class="sig-name descname"><span class="pre">polarized</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#refl1d.probe.QProbe.polarized" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.QProbe.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#QProbe.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.QProbe.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.Qmeasurement_union">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">Qmeasurement_union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#Qmeasurement_union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.Qmeasurement_union" title="Link to this definition">¶</a></dt>
<dd><p>Determine the unique Q, dQ across all datasets.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">XrayProbe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_reflectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dQo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'normal'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'uniform'</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'normal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#XrayProbe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.XrayProbe" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#refl1d.probe.Probe" title="refl1d.probe.Probe"><code class="xref py py-class docutils literal notranslate"><span class="pre">Probe</span></code></a></p>
<p>X-Ray probe.</p>
<p>By providing a scattering factor calculator for X-ray scattering, model
components can be defined by mass density and chemical composition.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.L">
<span class="sig-name descname"><span class="pre">L</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.L" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.T">
<span class="sig-name descname"><span class="pre">T</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">NDArray</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.T" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.back_absorption">
<span class="sig-name descname"><span class="pre">back_absorption</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.back_absorption" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.background">
<span class="sig-name descname"><span class="pre">background</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.background" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.intensity">
<span class="sig-name descname"><span class="pre">intensity</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.intensity" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.radiation">
<span class="sig-name descname"><span class="pre">radiation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="s"><span class="pre">'neutron'</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="s"><span class="pre">'xray'</span></span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'xray'</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.radiation" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.sample_broadening">
<span class="sig-name descname"><span class="pre">sample_broadening</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.sample_broadening" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.scattering_factors">
<span class="sig-name descname"><span class="pre">scattering_factors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">material</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">density</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#XrayProbe.scattering_factors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.XrayProbe.scattering_factors" title="Link to this definition">¶</a></dt>
<dd><p>Returns the scattering factors associated with the material given
the range of wavelengths/energies used in the probe.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="refl1d.probe.XrayProbe.theta_offset">
<span class="sig-name descname"><span class="pre">theta_offset</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Parameter</span></em><a class="headerlink" href="#refl1d.probe.XrayProbe.theta_offset" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.load4">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">load4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keysep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">':'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'#'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intensity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_absorption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">back_reflectivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Aguide</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">270.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_broadening</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">L</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dL</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dT</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dR</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">FWHM</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radiation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_range</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(None,</span> <span class="pre">None)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'normal'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversampling</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#load4"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.load4" title="Link to this definition">¶</a></dt>
<dd><p>Load in four column data Q, R, dR, dQ.</p>
<p>The file is loaded with <em>bumps.data.parse_multi</em>.  <em>keysep</em>
defaults to ‘:’ so that header data looks like JSON key: value
pairs.  <em>sep</em> is None so that the data uses white-space separated
columns.  <em>comment</em> is the standard ‘#’ comment character, used
for “# key: value” lines, for commenting out data lines using
“#number number number number”, and for adding comments after
individual data lines.  The parser isn’t very sophisticated, so
be nice.</p>
<p><em>intensity</em> is the overall beam intensity, <em>background</em> is the
overall background level, and <em>back_absorption</em> is the relative
intensity of data measured at negative Q compared to positive Q
data.  These can be values or a bumps <em>Parameter</em> objects.</p>
<p><em>back_reflectivity</em> is True if reflectivity was measured through
the substrate.  This allows you to arrange the model from substrate
to surface regardless of whether you are measuring through the
substrate or reflecting off the surface.</p>
<p><em>theta_offset</em> indicates sample alignment.  In order to use theta
offset you need to be able to convert from Q to wavelength and angle
by providing values for the wavelength or the angle, and the associated
resolution.</p>
<p><em>L</em>, <em>dL</em> in Angstroms can be used to recover angle and angular resolution
for monochromatic sources where wavelength is fixed and angle is varying.
These values can also be stored in the file header as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># wavelength: 4.75  # Ang</span>
<span class="c1"># wavelength_resolution: 0.02  # Ang (1-sigma)</span>
</pre></div>
</div>
<p><em>T</em>, <em>dT</em> in degrees can be used to recover wavelength and wavelength
dispersion for time of flight sources where angle is fixed and wavelength
is varying, or you can store them in the header of the file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># angle: 2  # degrees</span>
<span class="c1"># angular_resolution: 0.2  # degrees (1-sigma)</span>
</pre></div>
</div>
<p>If both angle and wavelength are varying in the data, you can specify
a separate value for each point, such the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># wavelength: [1, 1.2, 1.5, 2.0, ...]</span>
<span class="c1"># wavelength_resolution: [0.02, 0.02, 0.02, ...]</span>
</pre></div>
</div>
<p><em>dR</em> can be used to replace the uncertainty estimate for R in the
file with <span class="math notranslate nohighlight">\(\Delta R = R * \text{dR}\)</span>.  This allows files with only
two columns, <em>Q</em> and <em>R</em> to be loaded.  Note that points with <em>dR=0</em>
are automatically set to the minimum <em>dR&gt;0</em> in the dataset.</p>
<p>Instead of constants, you can provide function, <em>dT = lambda T: f(T)</em>,
<em>dL = lambda L: f(L)</em> or <em>dR = lambda Q, R, dR: f(Q, R, dR)</em> for more
complex relationships (with <em>dR()</em> returning 1-<span class="math notranslate nohighlight">\(\sigma\)</span> <span class="math notranslate nohighlight">\(\Delta R\)</span>).</p>
<p><em>sample_broadening</em> in degrees FWHM adds to the angular_resolution.
Scale 1-<span class="math notranslate nohighlight">\(\sigma\)</span> rms by <span class="math notranslate nohighlight">\(2 \surd(2 \ln 2) \approx 2.34\)</span> to convert to FWHM.</p>
<p><em>Aguide</em> and <em>H</em> are parameters for polarized beam measurements
indicating the magnitude and direction of the applied field.</p>
<p>Polarized data is represented using a multi-section data file,
with blank lines separating each section.  Each section must
have a polarization keyword, with value “++”, “+-”, “-+” or “–“.</p>
<p><em>FWHM</em> is True if dQ, dT, dL are given as FWHM rather than 1-<span class="math notranslate nohighlight">\(\sigma\)</span>.
<em>dR</em> is always 1-<span class="math notranslate nohighlight">\(\sigma\)</span>.  <em>sample_broadening</em> is always FWHM.</p>
<p><em>radiation</em> is ‘xray’ or ‘neutron’, depending on whether X-ray or
neutron scattering length density calculator should be used for
determining the scattering length density of a material.
Default is ‘neutron’</p>
<p><em>columns</em> is a string giving the column order in the file.  Default
order is “Q R dR dQ”.  Note: include dR and dQ even if the file only
has two or three columns, but put the missing columns at the end.</p>
<p><em>data_range</em> indicates which data rows to use.  Arguments are the
same as the list slice arguments, <em>(start, stop, step)</em>.  This follows
the usual semantics of list slicing, <em>L[start:stop:step]</em>, with
0-origin indices, stop is last plus one and step optional.  Use negative
numbers to count from the end.  Default is <em>(None, None)</em> for the entire
data set.</p>
<p><em>resolution</em> is ‘normal’ (default) or ‘uniform’. Use uniform if you
are merging Q points from a finely stepped energy sensitive measurement.</p>
<p><em>oversampling</em> is None or a positive integer indicating how many points to add
between data point to support sparse data with denser theory (for PolarizedNeutronProbe)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.make_probe">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">make_probe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#make_probe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.make_probe" title="Link to this definition">¶</a></dt>
<dd><p>Return a reflectometry measurement object of the given resolution.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.measurement_union">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">measurement_union</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#measurement_union"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.measurement_union" title="Link to this definition">¶</a></dt>
<dd><p>Determine the unique (T, dT, L, dL) across all datasets.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.parse_orso">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">parse_orso</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#parse_orso"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.parse_orso" title="Link to this definition">¶</a></dt>
<dd><p>load an ORSO text (.ort) or binary (.orb) file</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.probe.spin_asymmetry">
<span class="sig-prename descclassname"><span class="pre">refl1d.probe.</span></span><span class="sig-name descname"><span class="pre">spin_asymmetry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Qp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Rp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dRp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Qm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Rm</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dRm</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/probe.html#spin_asymmetry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.probe.spin_asymmetry" title="Link to this definition">¶</a></dt>
<dd><p>Compute spin asymmetry for R++, R–.</p>
<p><strong>Parameters:</strong></p>
<dl class="simple">
<dt><em>Qp</em>, <em>Rp</em>, <em>dRp</em><span class="classifier">vector</span></dt><dd><p>Measured ++ cross section and uncertainty.</p>
</dd>
<dt><em>Qm</em>, <em>Rm</em>, <em>dRm</em><span class="classifier">vector</span></dt><dd><p>Measured – cross section and uncertainty.</p>
</dd>
</dl>
<p>If <em>dRp</em>, <em>dRm</em> are None then the returned uncertainty will also be None.</p>
<p><strong>Returns:</strong></p>
<dl class="simple">
<dt><em>Q</em>, <em>SA</em>, <em>dSA</em><span class="classifier">vector</span></dt><dd><p>Computed spin asymmetry and uncertainty.</p>
</dd>
</dl>
<p><strong>Algorithm:</strong></p>
<p>Spin asymmetry, <span class="math notranslate nohighlight">\(S_A\)</span>, is:</p>
<div class="math notranslate nohighlight">
\[S_A = \frac{R_{++} - R_{--}}{R_{++} + R_{--}}\]</div>
<p>Uncertainty <span class="math notranslate nohighlight">\(\Delta S_A\)</span> follows from propagation of error:</p>
<div class="math notranslate nohighlight">
\[\Delta S_A^2 = \frac{4(R_{++}^2\Delta R_{--}^2+R_{--}^2\Delta R_{++})}
                    {(R_{++} + R_{--})^4}\]</div>
</dd></dl>

</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>