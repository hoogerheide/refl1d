<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>refl1d.errors module &#8212; Refl1D 0.7.7.post1533+gc6a0ac1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/haiku-site.css?v=ccbba224" />
    <link rel="stylesheet" type="text/css" href="_static/plot_directive.css" />
    <script src="_static/documentation_options.js?v=132fb2fb"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Refl1D 0.7.7.post1533+gc6a0ac1 documentation</span></a></h1>
        <h2 class="heading"><span>refl1d.errors module</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="Top">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="module-refl1d.errors">
<span id="refl1d-errors-module"></span><h1>refl1d.errors module<a class="headerlink" href="#module-refl1d.errors" title="Link to this heading">¶</a></h1>
<p>Visual representation of model uncertainty.</p>
<p>For reflectivity models, this aligns and plots a set of profiles chosen
from the parameter uncertainty distribution, and plots the distribution
of the residual values.</p>
<p>Use <em>run_errors</em> in a model file to reload the results of a batch DREAM fit.</p>
<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.align_profiles">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">align_profiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slabs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#align_profiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.align_profiles" title="Link to this definition">¶</a></dt>
<dd><p>Align profiles for each sample</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.calc_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">calc_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">problem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">points</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#calc_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.calc_errors" title="Link to this definition">¶</a></dt>
<dd><p>Align the sample profiles and compute the residual difference from the
measured reflectivity for a set of points.</p>
<p>The points should be sampled from the posterior probability
distribution computed from MCMC, bootstrapping or sampled from
the error ellipse calculated at the minimum.</p>
<p>Each of the returned arguments is a dictionary mapping model number to
error sample data as follows:</p>
<p>Returns (profiles, slabs, Q, residuals).</p>
<p><em>profiles</em></p>
<blockquote>
<div><p>Arrays of (z, rho, irho) for non-magnetic models or arrays
of (z, rho, irho, rhoM, thetaM) for magnetic models.  There
will be one set of arrays returned per error sample.</p>
</div></blockquote>
<p><em>slabs</em></p>
<blockquote>
<div><p>Array of slab thickness for the layers in the models.  There
will be one array returned per error sample.  Using slab thickness,
profiles can be aligned on interface boundaries and layer centers.</p>
</div></blockquote>
<p><em>Q</em></p>
<blockquote>
<div><p>Array of Q values for the data points in the model.  The data
points are the same for all error samples, so only one Q array
is needed per model.</p>
</div></blockquote>
<p><em>residuals</em></p>
<blockquote>
<div><p>Array of (theory-data)/uncertainty for each data point in
the measurement.  There will be one array returned per error sample.</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.reload_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">reload_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">store</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nshown</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/bumps/errplot.html#reload_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.reload_errors" title="Link to this definition">¶</a></dt>
<dd><p>Reload the MCMC state and compute the model confidence intervals.</p>
<p>The loaded error data is a sample from the fit space according to the
fit parameter uncertainty.  This is a subset of the samples returned
by the DREAM MCMC sampling process.</p>
<p><em>model</em> is the name of the model python file</p>
<p><em>store</em> is the name of the store directory containing the dream results</p>
<p><em>nshown</em> and <em>random</em> are as for <code class="xref py py-func docutils literal notranslate"><span class="pre">calc_errors_from_state()</span></code>.</p>
<p>Returns <em>errs</em> for <a class="reference internal" href="#refl1d.errors.show_errors" title="refl1d.errors.show_errors"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_errors()</span></code></a>.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.run_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">run_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kw</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#run_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.run_errors" title="Link to this definition">¶</a></dt>
<dd><p>Command line tool for generating error plots from models.</p>
<p>Type the following to regenerate the profile contour plots plots:</p>
<blockquote>
<div><p>$ refl1d align &lt;model&gt;.py &lt;store&gt; [&lt;align&gt;] [0|1|2|n]</p>
</div></blockquote>
<p>Align is either auto for the current behaviour, or it is an interface
number. You can align on the center of a layer by adding 0.5 to the
interface number. You can count interfaces from the surface by prefixing
with R.  For example, 0 is the substrate interface, R1 is the surface
interface, 2.5 is the the middle of layer 2 above the substrate.</p>
<p>You can plot the profiles and residuals on one plot by setting plots to 1,
on two separate plots by setting plots to 2, or each curve on its own
plot by setting plots to n. Plots are saved in &lt;store&gt;/&lt;model&gt;-err#.png.
If plots is 0, then no plots are created.</p>
<p>Additional parameters include:</p>
<blockquote>
<div><p><em>nshown</em>, <em>random</em> :</p>
<blockquote>
<div><p>see <code class="xref py py-func docutils literal notranslate"><span class="pre">bumps.errplot.calc_errors_from_state()</span></code></p>
</div></blockquote>
<p><em>contours</em>, <em>npoints</em>, <em>plots</em>, <em>save</em> :</p>
<blockquote>
<div><p>see <a class="reference internal" href="#refl1d.errors.show_errors" title="refl1d.errors.show_errors"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_errors()</span></code></a></p>
</div></blockquote>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.show_errors">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">show_errors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(68,</span> <span class="pre">95)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">200</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plots</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#show_errors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.show_errors" title="Link to this definition">¶</a></dt>
<dd><p>Plot the aligned profiles and the distribution of the residuals for
profiles and residuals returned from calc_errors.</p>
<p><em>contours</em> can be a list of percentiles or [].  If percentiles
are given, then show uncertainty using a contour plot with the
given levels, otherwise just overplot sample lines.
<em>contours</em> defaults to [68, 95, 100].</p>
<p><em>npoints</em> is the number of points to use when generating the
profile contour.  Since the z values for the various lines do not
correspond, the contour generator interpolates the entire profile
range with linear spacing using this number of points.</p>
<p><em>align</em> is the interface number plus fractional distance within
the layer following the interface.  For example, use 0 for the
substrate interface, use -1 for the surface interface, or use 2.5
for the center of the second slab above the substrate. If <em>align=’auto’</em>
then choose an offset that minimizes the cross-correlation between the
first profile and the current profile.</p>
<p><em>plots</em> is the number of plots to use (1, 2, or ‘n’).</p>
<p><em>save</em> is the basename of the plot to save.  This should usually
be “&lt;store&gt;/&lt;model&gt;”.  The program will add ‘-err#.png’ where ‘#’
is the number of the plot.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.show_profiles">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">show_profiles</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#show_profiles"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.show_profiles" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="refl1d.errors.show_residuals">
<span class="sig-prename descclassname"><span class="pre">refl1d.errors.</span></span><span class="sig-name descname"><span class="pre">show_residuals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">errors</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contours</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/refl1d/errors.html#show_residuals"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#refl1d.errors.show_residuals" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="Bottom">
      
        <p>
        <a class="uplink" href="index.html">Contents</a>
        </p>

      </div>

    <div class="footer" role="contentinfo">
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    </div>
  </body>
</html>